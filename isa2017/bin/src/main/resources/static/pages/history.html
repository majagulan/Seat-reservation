<div class="containter" ng-controller="historyController">
	<div class="container">
		<div class="table-responsive">
			<table class="table">
				<thead>
					<tr>
						<th>Institution name</th>
						<th>Projection name</th>
						<th>People</th>
						<th>My grade(Institution & Projection)</th>
						<th>Average grade of institution</th>
						<th>Average grade of projection</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="history in histories"
						ng-click="selectHistory(history)"
						ng-class="{'info' : selected===history}">
						<td>{{history.institution.institutionName}}</td>
						<td>{{history.projection.projectionName}}</td>
						<td><p ng-repeat="friend in history.friends">{{friend.userName}} {{friend.surname}}</p></td>
						<td> {{history.gradeOfInstitution}}     {{history.gradeOfProjection}}</td>
						<td>{{history.averageGradeForInstitution}}</td>
						<td>{{history.averageGradeForProjection}}</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div ng-if='selected!=null'>
			<input class="btn btn-primary" type="button" value="Add grade" ng-click="add()"/>
			<input class="btn btn-primary" type="button" value="Edit grade" ng-click="edit()"/>
			<input class="btn btn-primary" type="button" value="Delete grade" ng-click="deleteGrade()"/>
		</div>
		
		<div ng-if="addGrade!=null || editGrade!=null">
			<h3 ng-if="addGrade!=null">Add grade</h3>
			<h3 ng-if="editGrade!=null">Edit grade</h3>
			<form class="form-horizontal" name="gradeForm">
				<table class="table table-striped">
					<tr>
						<td>Institution</td>
						<td>{{selected.institution.institutionName}}</td>
					</tr>
					<tr>
						<td>Reservation</td>
						<td>{{selected.id}}</td>
					</tr>
					<tr>
						<td>Type of institution</td>
						<td>{{selected.institution.institutionType}}</td>
					</tr>
					<tr>
						<td>Grade for institution</td>
						<td><input class="form-control" type="number" ng-model="grade.gradeOfInstitution" min="1" max="5" required/></td>
					</tr>
					<tr>
						<td>Grade for projection</td>
						<td><input class="form-control" type="number" ng-model="grade.gradeOfProjection" min="1" max="5" required/></td>
					</tr>
					<tr>
						<td></td>
						<td ng-if="addGrade!=null"><input class="btn btn-primary" type="button" value="Add" ng-click='confirmAddGrade()' ng-disabled="gradeForm.$invalid"/></td>
						<td ng-if="editGrade!=null"><input class="btn btn-primary" type="button" value="Edit" ng-click='confirmEditGrade()' ng-disabled="gradeForm.$invalid"/></td>
					</tr>
				</table>
			</form>
		</div>
	</div>
</div>